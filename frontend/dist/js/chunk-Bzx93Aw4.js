import{j as e}from"./chunk-DywYPL-g.js";import{r as s}from"./chunk-DM_ejLFS.js";import{R as a}from"./chunk-DT2nnfnT.js";const r=()=>{const[r,t]=s.useState(!0),[i,l]=s.useState(null);s.useEffect(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,500))}catch(e){l("Error loading chart data")}finally{t(!1)}})()},[]);const d=async()=>{t(!0),await new Promise(e=>setTimeout(e,500)),t(!1)};return r?e.jsx("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-primary-200 rounded mb-4 w-48"}),e.jsx("div",{className:"h-64 bg-primary-200 rounded"})]})}):i?e.jsx("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx("p",{className:"font-medium",children:"Error loading chart data"}),e.jsx("button",{onClick:d,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})}):e.jsxs("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-vmeds-800",children:"Trend Semua Indikator Kemenkes"}),e.jsx("p",{className:"text-sm text-vmeds-600 mt-1",children:"BOR, LOS, BTO, dan TOI - 7 hari terakhir"})]}),e.jsxs("button",{onClick:d,className:"px-3 py-1 bg-primary-500 text-white text-xs rounded hover:bg-primary-600 transition-colors",children:[e.jsx(a,{className:"w-4 h-4 inline mr-1"}),"Refresh"]})]}),e.jsx("div",{className:"h-80 bg-primary-50 rounded-lg p-4",children:e.jsxs("div",{className:"h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-primary-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"BOR"})]}),e.jsx("p",{className:"text-lg font-bold text-primary-700",children:"72.5%"}),e.jsx("p",{className:"text-xs text-primary-600",children:"Target: 60-85%"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-vmeds-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-vmeds-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"LOS"})]}),e.jsx("p",{className:"text-lg font-bold text-vmeds-700",children:"7.2 hari"}),e.jsx("p",{className:"text-xs text-vmeds-600",children:"Target: 6-9 hari"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-success-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-success-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"BTO"})]}),e.jsx("p",{className:"text-lg font-bold text-success-700",children:"3.8x"}),e.jsx("p",{className:"text-xs text-success-600",children:"Target: 3-4x"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-warning-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-warning-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"TOI"})]}),e.jsx("p",{className:"text-lg font-bold text-warning-700",children:"2.1 hari"}),e.jsx("p",{className:"text-xs text-warning-600",children:"Target: 1-3 hari"})]})]}),e.jsx("div",{className:"flex-1 bg-white rounded-lg border border-primary-200 p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-primary-700 font-medium",children:"Multi-Indicator Chart"}),e.jsx("p",{className:"text-xs text-primary-600 mt-1",children:"Visualisasi trend 4 indikator dengan warna berbeda"})]})})]})}),e.jsx("div",{className:"mt-4 bg-success-50 border border-success-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-success-800",children:"Status: Semua indikator dalam rentang optimal"})]})})]})},t=()=>{const[r,t]=s.useState(!0),[i,l]=s.useState(null);s.useEffect(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,500))}catch(e){l("Error loading data")}finally{t(!1)}})()},[]);const d=async()=>{t(!0),await new Promise(e=>setTimeout(e,500)),t(!1)};return r?e.jsx("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-primary-200 rounded mb-4 w-48"}),e.jsx("div",{className:"h-64 bg-primary-200 rounded"})]})}):i?e.jsx("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx("p",{className:"font-medium",children:"Error loading chart data"}),e.jsx("button",{onClick:d,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})}):e.jsxs("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-vmeds-800",children:"BOR Trend + Prediksi"}),e.jsx("p",{className:"text-sm text-vmeds-600 mt-1",children:"Data aktual vs prediksi 3 hari ke depan"})]}),e.jsxs("button",{onClick:d,className:"px-3 py-1 bg-primary-500 text-white text-xs rounded hover:bg-primary-600 transition-colors",children:[e.jsx(a,{className:"w-4 h-4 inline mr-1"}),"Refresh"]})]}),e.jsx("div",{className:"h-80 bg-vmeds-50 rounded-lg p-4",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"bg-white rounded-lg p-4 border border-vmeds-200 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-vmeds-800",children:"BOR Saat Ini"}),e.jsx("p",{className:"text-2xl font-bold text-primary-700",children:"74.1%"}),e.jsx("p",{className:"text-xs text-primary-600",children:"Status: Optimal (60-85%)"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-vmeds-600",children:"Prediksi Besok"}),e.jsx("p",{className:"text-lg font-bold text-blue-700",children:"73.2%"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Tetap optimal"})]})]})})})}),e.jsxs("div",{className:"mt-4 flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),e.jsx("span",{className:"text-vmeds-600",children:"Data Aktual"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-vmeds-600",children:"Prediksi ML"})]})]})]})};function i(){const[a,r]=s.useState(null),[t,i]=s.useState((new Date).getMonth()+1),[l,d]=s.useState((new Date).getFullYear()),n=async e=>{try{r(e);const s=`http://localhost:8000/api/v1/export/${e}?bulan=${t}&tahun=${l}`,a=await fetch(s);if(!a.ok)throw new Error("Failed to export data");const i=await a.blob(),d=window.URL.createObjectURL(i),n=document.createElement("a");n.href=d;const c=a.headers.get("content-disposition");let o=`sensus_${t}_${l}`;if(c){const e=c.match(/filename=(.+)/);e&&(o=e[1].replace(/"/g,""))}n.download=o,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(d)}catch(s){alert("Gagal mengexport data. Pastikan ada data untuk periode tersebut.")}finally{r(null)}},c=e=>a===e;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Laporan"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periode Export"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:t,onChange:e=>i(Number(e.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm flex-1",children:Array.from({length:12},(s,a)=>e.jsx("option",{value:a+1,children:new Date(2025,a).toLocaleString("id-ID",{month:"long"})},a+1))}),e.jsx("input",{type:"number",value:l,onChange:e=>d(Number(e.target.value)),className:"border border-gray-300 rounded px-3 py-2 w-24 text-sm",min:"2020",max:"2030"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>n("excel-prediksi"),disabled:c("excel-prediksi"),className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[c("excel-prediksi")?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("span",{children:c("excel-prediksi")?"Mengexport...":"Excel Lengkap + Prediksi"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>n("excel"),disabled:c("excel"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:[c("excel")?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Excel Basic"})]}),e.jsxs("button",{onClick:()=>n("csv"),disabled:c("csv"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:[c("csv")?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"CSV"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Format Export:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Excel Lengkap:"})," Data sensus + prediksi BOR + ringkasan indikator (3 sheet)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Excel Basic:"})," Data sensus harian saja"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"CSV:"})," Format sederhana untuk analisis lanjut"]})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("p",{children:"📁 File akan otomatis terdownload dengan nama:"}),e.jsxs("p",{className:"font-mono bg-gray-100 px-2 py-1 rounded mt-1",children:["laporan_sensus_prediksi_",t.toString().padStart(2,"0"),"_",l,".xlsx"]})]})]})}export{r as A,t as B,i as E};
