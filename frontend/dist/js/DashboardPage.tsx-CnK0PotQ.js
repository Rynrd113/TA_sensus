import{j as e}from"./chunk-DywYPL-g.js";import{r as s}from"./chunk-DM_ejLFS.js";import{L as r}from"./chunk-B_g4F0yl.js";import{R as a,S as t,U as i,a as l,C as d,b as n,T as c,c as m}from"./chunk-DT2nnfnT.js";function o(){const[o,x]=s.useState(null),[h,p]=s.useState(!0),[g,b]=s.useState(null),[u,j]=s.useState((new Date).getMonth()+1),[v,N]=s.useState((new Date).getFullYear()),y=async()=>{try{p(!0);const e=new AbortController,s=setTimeout(()=>e.abort(),1e4),r=await fetch(`http://localhost:8000/api/v1/dashboard/stats?bulan=${u}&tahun=${v}`,{signal:e.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});if(clearTimeout(s),!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.json();x(a),b(null)}catch(e){e instanceof Error?b(e.message):b("Failed to fetch dashboard data")}finally{p(!1)}};s.useEffect(()=>{y()},[u,v]);const f=()=>{y()};if(h)return e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(s=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})},s))})]})});if(g)return e.jsx("div",{className:"min-h-screen bg-primary-50 p-4 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg border border-primary-200 p-8 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold text-vmeds-900 mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-vmeds-600 mb-4",children:g}),e.jsxs("button",{onClick:f,className:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})})});if(!o)return null;const{stats:w}=o;return e.jsx("div",{className:"min-h-screen bg-primary-50 p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg border border-primary-200 p-6 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-vmeds-900 mb-2",children:"Dashboard Overview"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-vmeds-600",children:[e.jsxs("span",{children:["Periode: ",o.periode]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("span",{children:["Update: ",w.tanggal_terakhir]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Trend BOR:"}),(s=>{switch(s){case"naik":case"meningkat":return e.jsx(m,{className:"w-4 h-4 text-green-500"});case"turun":case"menurun":return e.jsx(c,{className:"w-4 h-4 text-red-500"});default:return e.jsx("span",{className:"text-gray-500",children:"→"})}})(o.trend_bor),e.jsx("span",{className:"capitalize",children:o.trend_bor})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:u,onChange:e=>j(Number(e.target.value)),className:"px-3 py-2 border border-primary-300 bg-white text-vmeds-700 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:Array.from({length:12},(s,r)=>e.jsx("option",{value:r+1,children:new Date(2025,r).toLocaleDateString("id-ID",{month:"long"})},r+1))}),e.jsx("select",{value:v,onChange:e=>N(Number(e.target.value)),className:"px-3 py-2 border border-primary-300 bg-white text-vmeds-700 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:Array.from({length:5},(s,r)=>e.jsx("option",{value:2023+r,children:2023+r},2023+r))})]}),e.jsx("button",{onClick:f,className:"p-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:e.jsx(a,{className:"w-4 h-4"})})]})]})}),o.peringatan&&o.peringatan.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Peringatan Sistem"}),e.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:o.peringatan.map((s,r)=>e.jsxs("li",{children:["• ",s]},r))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(t,{title:"BOR Hari Ini",value:w.bor_terkini.toFixed(2),unit:"%",description:"Tingkat hunian tempat tidur",variant:((e,s)=>{switch(e){case"bor":return s>=60&&s<=85?"success":s>85?"critical":"warning";case"los":return s>=6&&s<=9?"success":s>9?"critical":"default";case"bto":return s>=3&&s<=5?"success":"default";case"toi":return s>=1&&s<=3?"success":"default";default:return"default"}})("bor",w.bor_terkini),icon:e.jsx(i,{className:"w-5 h-5"}),trend:o.trend_bor}),e.jsx(t,{title:"Total Pasien",value:w.total_pasien_hari_ini,description:"Pasien hari ini",variant:"default",icon:e.jsx(i,{className:"w-5 h-5"})}),e.jsx(t,{title:"Kapasitas Kosong",value:w.kapasitas_kosong,unit:"bed",description:"Tempat tidur tersedia",variant:w.kapasitas_kosong<10?"warning":"success",icon:e.jsx(l,{className:"w-5 h-5"})}),e.jsx(t,{title:"Total TT",value:w.tt_total,unit:"bed",description:"Total tempat tidur",variant:"default",icon:e.jsx(d,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(r,{to:"/indikator-lengkap",className:"bg-white rounded-lg border border-primary-200 p-6 hover:border-primary-300 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-100 rounded-lg",children:e.jsx(l,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-vmeds-900 mb-1",children:"Indikator Lengkap"}),e.jsx("p",{className:"text-sm text-vmeds-600",children:"Lihat BOR, LOS, BTO, TOI detail"})]})]})}),e.jsx(r,{to:"/bangsal",className:"bg-white rounded-lg border border-primary-200 p-6 hover:border-primary-300 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-100 rounded-lg",children:e.jsx(i,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-vmeds-900 mb-1",children:"Input Data"}),e.jsx("p",{className:"text-sm text-vmeds-600",children:"Tambah data sensus harian"})]})]})}),e.jsx(r,{to:"/chart",className:"bg-white rounded-lg border border-primary-200 p-6 hover:border-primary-300 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-100 rounded-lg",children:e.jsx(n,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-vmeds-900 mb-1",children:"Analytics"}),e.jsx("p",{className:"text-sm text-vmeds-600",children:"Grafik dan prediksi BOR"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-primary-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-vmeds-900 mb-4",children:"Standar Indikator Kemenkes RI"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-vmeds-900",children:"BOR"}),e.jsx("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-1 rounded-full",children:"Okupansi"})]}),e.jsx("p",{className:"text-sm text-vmeds-600 mb-1",children:"Target: 60-85%"}),e.jsx("p",{className:"text-xs text-vmeds-500",children:"Bed Occupancy Rate"})]}),e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-vmeds-900",children:"LOS"}),e.jsx("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-1 rounded-full",children:"Lama Rawat"})]}),e.jsx("p",{className:"text-sm text-vmeds-600 mb-1",children:"Target: 6-9 hari"}),e.jsx("p",{className:"text-xs text-vmeds-500",children:"Length of Stay"})]}),e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-vmeds-900",children:"BTO"}),e.jsx("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-1 rounded-full",children:"Perputaran"})]}),e.jsx("p",{className:"text-sm text-vmeds-600 mb-1",children:"Target: 40-50x/tahun"}),e.jsx("p",{className:"text-xs text-vmeds-500",children:"Bed Turn Over"})]}),e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-vmeds-900",children:"TOI"}),e.jsx("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-1 rounded-full",children:"Interval"})]}),e.jsx("p",{className:"text-sm text-vmeds-600 mb-1",children:"Target: 1-3 hari"}),e.jsx("p",{className:"text-xs text-vmeds-500",children:"Turn Over Interval"})]})]})]})]})})}export{o as default};
